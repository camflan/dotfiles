---
# Dotbot configuration
#

- defaults:
    brewfile:
      stdout: true
      stderr: true
    brew:
      stderr: true
      stdout: false
    git:
      stderr: true
      stdout: false
    link:
      relink: true
      stderr: true

- clean: ['~']

- link:
    ~/.zshenv: zshenv
    ~/.gitignore: gitignore
    ~/.tmux.conf: tmux.conf
    ~/.vimrc: vimrc  # for legacy vim support - I use neovim by default
    ~/.config/:
      #
      # NOTE: there's an issue when there is only a single matched file
      # in a glob. If you get 'ambigious action requested', this is probably
      # the issue
      # https://github.com/anishathalye/dotbot/issues/315
      #
      glob: true
      path: config/*
      relink: true
      exclude: [config/asdf, config/zsh]  # handled later
    # ASDF-vm stuff
    ~/.config/asdf/asdfrc:
      path: config/asdf/asdfrc
      create: true
    # link asdf .default-XXXX-packages files
    ~/:
      glob: true
      path: config/asdf/default-*
      prefix: .  # add a '.' to each filename
    ~/.config/zsh/:
      glob: true
      path: config/zsh/*
      prefix: .  # add a '.' to each filename
      create: true

- git:
    ~/.config/zsh/.zprezto:
      description: Install zprezto
      url: https://github.com/sorin-ionescu/prezto.git
      recursive: true

- shell:
    # Update all of our submodules (dotbot, dotbot plugins)
    - command: git submodule update --init --recursive
      description: Installing submodules
      stderr: true

# HOMEBREW
- install-brew: true
- brewfile:
    - Brewfile

# ASDF-VM
- asdf:
    - plugin: awscli
      url: https://github.com/MetricMike/asdf-awscli.git
    - plugin: cloud-sql-proxy
      url: https://github.com/pbr0ck3r/asdf-cloud-sql-proxy.git
    - plugin: java
      url: https://github.com/halcyon/asdf-java.git
    - plugin: kubectl
      url: https://github.com/asdf-community/asdf-kubectl.git
    - plugin: maven
      url: https://github.com/halcyon/asdf-maven.git
    - plugin: neovim
      url: https://github.com/richin13/asdf-neovim.git
    - plugin: nodejs
      url: https://github.com/asdf-vm/asdf-nodejs.git
    - plugin: pre-commit
      url: https://github.com/jonathanmorley/asdf-pre-commit.git
    - plugin: poetry
      url: https://github.com/asdf-community/asdf-poetry.git
    - plugin: postgres
      url: https://github.com/smashedtoatoms/asdf-postgres.git
    - plugin: python
      url: https://github.com/danhper/asdf-python.git
    - plugin: ruby
      url: https://github.com/asdf-vm/asdf-ruby.git
    - plugin: rust
      url: https://github.com/code-lever/asdf-rust.git
    - plugin: terraform
      url: https://github.com/asdf-community/asdf-hashicorp.git
    - plugin: vault
      url: https://github.com/asdf-community/asdf-hashicorp.git
    - plugin: yarn
      url: https://github.com/twuni/asdf-yarn.git

# Github cli extensions
- ghe:
    - gennaro-tedesco/gh-s
    - dlvhdr/gh-dash
    - kawarimidoll/gh-graph
    - matt-bartel/gh-clone-org
    - rnorth/gh-combine-prs
    - seachicken/gh-poi
    - yusukebe/gh-markdown-preview

# Rust crates
- cargo: [ripgrep]
  # Install from create once https://github.com/starship/starship/pull/5657 is merged/released
    # - starship
