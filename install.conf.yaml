---
# Dotbot configuration
#

- defaults:
    crontab:
      stderr: true
      stdout: true
    homebrew:
      stderr: true
      stdout: true
    git:
      stderr: true
      stdout: true
    link:
      relink: true
      stderr: true

- clean: ['~']

- crontab:
  # Claude code runs in 5 hour session windows. This starts a session early in the morning
  # so that I can fit 3 sessions in, vs 2
  # every day at 5am
  - command: claude -p "Good morning"
    time: 0 5 * * *

- link:
    ~/.aider.conf.yml: aider.conf.yml
    ~/.aider.model.settings.yml: aider.model.settings.yml
    ~/.cloudflared: cloudflared
    ~/.tmux.conf: tmux.conf
    ~/.vimrc: vimrc  # for legacy vim support - I use neovim by default
    ~/.zshenv: zshenv

    ~/Library/Application Support/:
      glob: true
      path: "Application Support/*"
      relink: true

    ~/.config/:
      #
      # NOTE: there's an issue when there is only a single matched file
      # in a glob. If you get 'ambigious action requested', this is probably
      # the issue
      # https://github.com/anishathalye/dotbot/issues/315
      #
      exclude: [config/asdf, config/zsh]  # handled later
      glob: true
      path: config/*
      relink: true

    ~/.config/zsh/:
      create: true
      glob: true
      path: config/zsh/*
      prefix: .  # add a '.' to each filename

    # XDG paths
    ~/.cache:
      path: ~/Library/Caches

- git:
    ~/.config/zsh/.zprezto:
      description: Install zprezto
      recursive: true
      url: https://github.com/sorin-ionescu/prezto.git

- shell:
    # Update all of our submodules (dotbot, dotbot plugins)
    - command: git submodule update --remote --merge
      description: Installing submodules
      stderr: true

# HOMEBREW
- install-brew: true
- brewfile:
    - Brewfile

# Github cli extensions
- ghe:
    - basecamp/gh-signoff
    - dlvhdr/gh-dash
    - gennaro-tedesco/gh-s
    - kawarimidoll/gh-graph
    - matt-bartel/gh-clone-org
    - rnorth/gh-combine-prs
    - seachicken/gh-poi
    - yusukebe/gh-markdown-preview
